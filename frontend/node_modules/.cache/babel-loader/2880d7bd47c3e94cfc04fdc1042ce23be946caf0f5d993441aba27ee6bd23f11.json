{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\ProductCatalog\\\\frontend\\\\src\\\\components\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\n/**\r\n * Component that displays the product details page. This component also displays\r\n * 3 recommended products for the current product being viewed, and clicking on\r\n * any of the recommendations will take you to the corresponding product's details page,\r\n * and update product similarities.\r\n * \r\n * @component\r\n */\nimport React, { useState, useEffect } from \"react\";\nimport ProductForm from \"./ProductForm\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProductDetail({\n  productId,\n  onBack,\n  onSelectRecommendation\n}) {\n  _s();\n  const [product, setProduct] = useState(null);\n  const [recommendations, setRecommendations] = useState([]);\n  const [displayEditForm, setDisplayEditForm] = useState(false);\n\n  // fetches a product's details along with its recommendations\n  async function fetchDetails() {\n    const res = await fetch(`/products/${productId}/?raw=0`);\n    const data = await res.json();\n    setProduct(data.product);\n    setRecommendations(data.recommendations);\n  }\n\n  // fetch product details on mount, unless productId is null\n  useEffect(() => {\n    if (productId) {\n      fetchDetails();\n    } else {\n      setProduct(null);\n    }\n  }, [productId]);\n\n  // Updates similarity scores, then loads the product details for the\n  // recommended product that was just clicked on.\n  const handleRecommendationClick = async clickedId => {\n    const otherIds = recommendations.filter(rec => rec.id !== clickedId).map(rec => rec.id);\n    await fetch(\"/similarity/update/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        current_product_id: productId,\n        clicked_product_id: clickedId,\n        other_product_ids: otherIds\n      })\n    });\n    onSelectRecommendation(clickedId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onBack,\n      children: \"\\u2190 Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), product ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: product.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Category:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 24\n        }, this), \" \", product.category.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Tags:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 24\n        }, this), \" \", product.tags.map(t => t.name).join(\", \")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Recommended Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: recommendations.map(rec => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRecommendationClick(rec.id),\n            children: rec.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 33\n          }, this)\n        }, rec.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this), displayEditForm && /*#__PURE__*/_jsxDEV(ProductForm, {\n      mode: \"edit\",\n      productId: productId,\n      onClose: () => {\n        setDisplayEditForm(false);\n      },\n      onSave: () => {\n        setDisplayEditForm(false);\n        fetchDetails();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductDetail, \"Y6RM28ccSuEFEUefjwVpqFO6mN0=\");\n_c = ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useState","useEffect","ProductForm","jsxDEV","_jsxDEV","Fragment","_Fragment","ProductDetail","productId","onBack","onSelectRecommendation","_s","product","setProduct","recommendations","setRecommendations","displayEditForm","setDisplayEditForm","fetchDetails","res","fetch","data","json","handleRecommendationClick","clickedId","otherIds","filter","rec","id","map","method","headers","body","JSON","stringify","current_product_id","clicked_product_id","other_product_ids","style","padding","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","name","description","category","tags","t","join","mode","onClose","onSave","_c","$RefreshReg$"],"sources":["D:/projects/ProductCatalog/frontend/src/components/ProductDetail.js"],"sourcesContent":["/**\r\n * Component that displays the product details page. This component also displays\r\n * 3 recommended products for the current product being viewed, and clicking on\r\n * any of the recommendations will take you to the corresponding product's details page,\r\n * and update product similarities.\r\n * \r\n * @component\r\n */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport ProductForm from \"./ProductForm\";\r\n\r\nexport default function ProductDetail({ productId, onBack, onSelectRecommendation }) {\r\n    const [product, setProduct] = useState(null);\r\n    const [recommendations, setRecommendations] = useState([]);\r\n    const [displayEditForm, setDisplayEditForm] = useState(false);\r\n\r\n    // fetches a product's details along with its recommendations\r\n    async function fetchDetails() {\r\n        const res = await fetch(`/products/${productId}/?raw=0`);\r\n        const data = await res.json();\r\n        setProduct(data.product);\r\n        setRecommendations(data.recommendations);\r\n    }\r\n\r\n    // fetch product details on mount, unless productId is null\r\n    useEffect(() => {\r\n        if (productId) {\r\n            fetchDetails();\r\n        } else {\r\n            setProduct(null);\r\n        }\r\n    }, [productId]);\r\n\r\n    // Updates similarity scores, then loads the product details for the\r\n    // recommended product that was just clicked on.\r\n    const handleRecommendationClick = async (clickedId) => {\r\n        const otherIds = recommendations\r\n            .filter((rec) => rec.id !== clickedId)\r\n            .map((rec) => rec.id);\r\n\r\n        await fetch(\"/similarity/update/\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                current_product_id: productId,\r\n                clicked_product_id: clickedId,\r\n                other_product_ids: otherIds,\r\n            }),\r\n        });\r\n\r\n        onSelectRecommendation(clickedId);\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: 20 }}>\r\n            <button onClick={onBack}>‚Üê Back</button>\r\n            {product ? (\r\n                <>\r\n                    <h2>{product.name}</h2>\r\n                    <p>{product.description}</p>\r\n                    <p><strong>Category:</strong> {product.category.name}</p>\r\n                    <p><strong>Tags:</strong> {product.tags.map((t) => t.name).join(\", \")}</p>\r\n\r\n                    <h3>Recommended Products</h3>\r\n                    <ul>\r\n                        {recommendations.map((rec) => (\r\n                            <li key={rec.id}>\r\n                                <button onClick={() => handleRecommendationClick(rec.id)}>\r\n                                    {rec.name}\r\n                                </button>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </>\r\n            ) : (\r\n                <p>Loading...</p>\r\n            )}\r\n            {displayEditForm && (\r\n                <ProductForm\r\n                    mode={\"edit\"}\r\n                    productId={productId}\r\n                    onClose={() => {\r\n                        setDisplayEditForm(false);\r\n                    }}\r\n                    onSave={() => {\r\n                        setDisplayEditForm(false);\r\n                        fetchDetails();\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}